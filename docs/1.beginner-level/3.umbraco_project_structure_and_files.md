# ğŸ—ï¸ Umbraco Project Structure and Files

> Understand every file, folder, and config in a real Umbraco v13 project like a pro ğŸ§ ğŸ“ â€” no black boxes allowed!

---

## ğŸ“¦ Overall Folder Structure (After `dotnet new umbraco`)

```bash
MyUmbracoSite/
â”œâ”€â”€ App_Plugins/
â”œâ”€â”€ Controllers/
â”œâ”€â”€ Models/
â”œâ”€â”€ Views/
â”œâ”€â”€ wwwroot/
â”œâ”€â”€ appsettings.json
â”œâ”€â”€ Program.cs
â”œâ”€â”€ Umbraco/
â”‚   â”œâ”€â”€ Config/
â”‚   â”œâ”€â”€ Logs/
â”‚   â””â”€â”€ Media/
â”œâ”€â”€ package.json (if frontend tools exist)
```

---

## ğŸ§  Mermaid: High-Level Structure

```mermaid
graph TD
  A[Program.cs] --> B[ASP.NET Core Host]
  B --> C[Umbraco Middleware]
  C --> D[Document Types, Templates]
  C --> E[Controllers & Views]
  C --> F[App_Plugins]
  B --> G[wwwroot]
  C --> H[Umbraco Backoffice]
```

---

## ğŸ—‚ï¸ Folder-by-Folder Breakdown

---

### ğŸ“ `App_Plugins/`

> Contains **custom backoffice plugins** or property editors

- JS/CSS files used in the Umbraco admin UI
- Use this to create custom fields like Google Maps picker, tag cloud, etc.

```bash
App_Plugins/
â””â”€â”€ MyColorPicker/
    â”œâ”€â”€ package.manifest
    â”œâ”€â”€ colorpicker.controller.js
    â””â”€â”€ colorpicker.view.html
```

---

### ğŸ“ `Controllers/`

> Your custom **SurfaceControllers** and **API controllers**

- SurfaceControllers = handle form submissions (HTML/Razor)
- API Controllers = serve JSON (for Angular/React frontend or integrations)

Example:

```csharp
public class ContactSurfaceController : SurfaceController {
  public IActionResult SubmitForm(ContactModel model) { ... }
}
```

---

### ğŸ“ `Models/`

> If you use **ModelsBuilder (SourceCode)**, it generates your strongly typed content models here.

```csharp
public partial class BlogPost : PublishedContentModel {
  public string Title => this.Value<string>("title");
}
```

ğŸ“Œ Only generated if `ModelsBuilder` is set to use SourceCode mode.

---

### ğŸ“ `Views/`

> Your **Razor templates** for pages, partials, and layouts

```bash
Views/
â”œâ”€â”€ Layout.cshtml          # Site-wide layout
â”œâ”€â”€ Home.cshtml            # Template for Home Document Type
â”œâ”€â”€ BlogPost.cshtml        # Template for BlogPost
â””â”€â”€ Partials/
    â””â”€â”€ Header.cshtml
```

> These templates are matched with **Document Types** by alias in the backoffice.

---

### ğŸ“ `wwwroot/`

> Static web assets (CSS, JS, images)

```bash
wwwroot/
â”œâ”€â”€ css/
â”œâ”€â”€ js/
â””â”€â”€ favicon.ico
```

ğŸ’¡ Use this to add client-side logic, Bootstrap/Tailwind, etc.

---

### ğŸ“ `Umbraco/`

> Umbracoâ€™s internal folders (auto-managed)

```bash
Umbraco/
â”œâ”€â”€ Config/     # Site-specific configs
â”œâ”€â”€ Logs/       # All Umbraco logs here (use Serilog)
â””â”€â”€ Media/      # Uploaded media (via backoffice)
```

You donâ€™t create these â€“ Umbraco generates them.

---

## âš™ï¸ Config & Startup Files

---

### ğŸ“„ `Program.cs`

> Startup point for the ASP.NET Core app

```csharp
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddUmbraco(...).AddBackOffice().AddWebsite().Build().Run();
```

ğŸ“Œ You can add middlewares, DI services, configure routing, etc.

---

### ğŸ“„ `appsettings.json`

> Main config file for connection strings, logging, custom settings

```json
{
  "ConnectionStrings": {
    "umbracoDbDSN": "Server=...;Database=...;"
  },
  "Umbraco": {
    "CMS": {
      "Global": {
        "Id": "MyUmbracoSite"
      },
      "UnattendedInstall": {
        "AdminEmail": "...",
        "AdminPassword": "..."
      }
    }
  }
}
```

---

### ğŸ“„ `.csproj` (Project File)

> NuGet packages, target framework, Razor options, ModelsBuilder setup

Example:

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <UserSecretsId>MySite-Secrets</UserSecretsId>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Umbraco.Cms" Version="13.*" />
  </ItemGroup>
</Project>
```

---

## ğŸ§  Workflow Summary

<div align="center">

```mermaid
graph TD
  A[Editor Creates Content in Backoffice] --> B[Umbraco Saves to DB]
  B --> C[Document Type maps to Razor Template]
  C --> D[Template uses Views and Partials]
  D --> E[Rendered as HTML to Visitor]
  F[Custom Controllers/API] --> E
```

</div>

---

## ğŸ”¥ Pro Tips

- âœ… Organize custom logic into `Services/`, `Helpers/`, or `Repositories/` (even though not scaffolded by default)
- âœ… Use **ViewComponents** for reusable page blocks
- âœ… Use **ModelsBuilder.SourceCode** mode in dev; switch to `PureLive` in production if you need hot reload

---

## ğŸ§ª Quick Practice Ideas

- ğŸ”§ Create a custom Razor layout with Bootstrap
- ğŸ¨ Add an image upload field in Document Type and display in view
- ğŸ› ï¸ Add a SurfaceController for a contact form
- ğŸ§° Explore the `App_Plugins` folder by installing a package (e.g. SEO Checker)

---

## âœ… Summary

| Folder             | Role                                     |
| ------------------ | ---------------------------------------- |
| `App_Plugins/`     | Backoffice plugins (JS/CSS for editors)  |
| `Controllers/`     | MVC logic for forms or APIs              |
| `Models/`          | Strongly typed content models            |
| `Views/`           | Razor templates mapped to Document Types |
| `wwwroot/`         | Static frontend files (CSS, JS)          |
| `Umbraco/`         | Internal configs, logs, media            |
| `Program.cs`       | Startup config                           |
| `appsettings.json` | DB, CMS config, etc.                     |
